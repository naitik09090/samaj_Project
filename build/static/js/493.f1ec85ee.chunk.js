"use strict";(self.webpackChunksamaj=self.webpackChunksamaj||[]).push([[493],{493:(e,o,t)=>{t.r(o),t.d(o,{default:()=>d});var l=t(555),s=t(43),a=t(620),n=t(720),i=t(475),c=t(579);const d=()=>{const[e,o]=(0,s.useState)([]),[t,d]=(0,s.useState)([]),[r,h]=(0,s.useState)("All"),[g,u]=(0,s.useState)(""),[f,x]=(0,s.useState)([]),[m,p]=(0,s.useState)(null),[b,j]=(0,s.useState)(""),[v,y]=(0,s.useState)(!0),A=(0,s.useRef)(null),[N,S]=(0,s.useState)(0),[C,w]=(0,s.useState)(0),k="https://ahirsamajbe-gnapdbcbbzdcabc2.centralindia-01.azurewebsites.net",L=e=>null===e||void 0===e?void 0:e.replace(/^http:\/\//i,"https://"),E=v?{data:[{id:"loading-1",name:"\u23f3 Loading schools...",school_type:"Loading",logo:null,isLoading:!0},{id:"loading-2",name:"\u23f3 Fetching data...",school_type:"Loading",logo:null,isLoading:!0},{id:"loading-3",name:"\u23f3 Please wait...",school_type:"Loading",logo:null,isLoading:!0},{id:"loading-4",name:"\u23f3 Almost there...",school_type:"Loading",logo:null,isLoading:!0}]}:e;(0,s.useEffect)(()=>{console.log("\n\ud83d\ude80 ========== SCHOOLS API CALL STARTED (ImageSlider.js) =========="),console.log("\ud83d\udccd Step 1: useEffect triggered for schools data"),console.log("   API Endpoint:","".concat(k,"/api/v1/schools/schools/")),console.log("\n\u26a1 Step 2: Setting loading state to TRUE"),console.log("   \ud83c\udfa8 Loading placeholders will show IMMEDIATELY in UI"),console.log('   \u23f1\ufe0f  User sees "Loading schools..." while waiting'),y(!0),console.log("\n\ud83c\udf10 Step 3: Making actual API call..."),console.log("   \u23f3 Waiting for server response..."),fetch("".concat(k,"/api/v1/schools/schools/")).then(e=>(console.log("\n\u2705 Step 4: API Response received!"),console.log("   Response status:",e.status),e.json())).then(e=>{var t;console.log("\n\ud83d\udce6 Step 5: Processing API data"),console.log("   Real API Data:",e),console.log("   Number of schools:",(null===(t=e.data)||void 0===t?void 0:t.length)||0),o(e),d(e),y(!1);const l=[...new Set((e.data||[]).map(e=>e.school_type).filter(Boolean))].sort();x(l),console.log("   Extracted school types:",l),console.log(h),console.log("\n\u2728 Step 6: State updated!"),console.log("   \ud83c\udfaf Loading placeholders replaced with REAL schools"),console.log("   \ud83d\udc41\ufe0f  User now sees actual schools from database"),console.log("========== SCHOOLS API CALL COMPLETED ==========\n")}).catch(e=>{console.error("\n\u274c API Error:",e),y(!1),console.log("   Loading state cleared despite error")})},[]);const R={"Ahir Boarding":"\u0a86\u0ab9\u0ac0\u0ab0 \u0aac\u0acb\u0ab0\u0acd\u0aa1\u0abf\u0a82\u0a97","Ahir Charitable Trust":"\u0a86\u0ab9\u0abf\u0ab0 \u0a9a\u0ac7\u0ab0\u0abf\u0a9f\u0ac7\u0aac\u0ab2 \u0a9f\u0acd\u0ab0\u0ab8\u0acd\u0a9f","Ahir Samaj":"\u0a86\u0ab9\u0ac0\u0ab0 \u0ab8\u0aae\u0abe\u0a9c \u0ab5\u0abe\u0aa1\u0ac0","KANYA CHHATRALAYA":"\u0a95\u0aa8\u0acd\u0aaf\u0abe \u0a9b\u0aa4\u0acd\u0ab0\u0abe\u0ab2\u0aaf","Kanya Chhatra Alaya":"\u0a95\u0aa8\u0acd\u0aaf\u0abe \u0a9b\u0aa4\u0acd\u0ab0\u0abe\u0ab2\u0aaf",CHHATRALAYA:"\u0a9b\u0aa4\u0acd\u0ab0\u0abe\u0ab2\u0aaf","Chhatra Alaya":"\u0a9b\u0abe\u0aa4\u0acd\u0ab0\u0abe\u0ab2\u0aaf","Ahir Kalyan Mandal":"\u0a86\u0ab9\u0abf\u0ab0 \u0a95\u0ac7\u0ab3\u0ab5\u0aa3\u0ac0 \u0aae\u0a82\u0aa1\u0ab3"};(0,s.useEffect)(()=>{const o=(null===e||void 0===e?void 0:e.data)||[];if(null==m)return void d((0,l.A)((0,l.A)({},e),{},{data:o}));const t=o.filter(e=>e.school_type===m);d((0,l.A)((0,l.A)({},e),{},{data:t}))},[m,e]),(0,s.useEffect)(()=>{if(!b.trim()){const o=(null===e||void 0===e?void 0:e.data)||[];if(null==m)d((0,l.A)((0,l.A)({},e),{},{data:o}));else{const t=o.filter(e=>e.school_type===m);d((0,l.A)((0,l.A)({},e),{},{data:t}))}return}let o="".concat(k,"/api/v1/schools/schools/?search=").concat(encodeURIComponent(b));null!=m&&(o+="&school_type=".concat(encodeURIComponent(m))),fetch(o).then(e=>e.json()).then(e=>d(e)).catch(e=>console.error("Search error:",e)),console.log(j)},[b,m,e]),(0,s.useEffect)(()=>{const o=(null===e||void 0===e?void 0:e.data)||[];if("All"===r)return void d((0,l.A)((0,l.A)({},e),{},{data:o}));if(!g)return;console.log(u);const t=o.filter(e=>e[r]===g);d((0,l.A)((0,l.A)({},e),{},{data:t}))},[r,g,e]);const I=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;const t=Array.isArray(e)?e:[];if(!t.length)return[];if(t.length<=o)return[t.slice()];const l=t.concat(t.slice(0,Math.max(0,o-1))),s=[];for(let a=0;a<t.length;a++)s.push(l.slice(a,a+o));return s},P=(null===t||void 0===t?void 0:t.data)||[],_=I(P,8),F=I(P,4),T=()=>{_.length&&S(e=>(e+1)%_.length)},z=()=>{_.length&&S(e=>(e-1+_.length)%_.length)};return(0,s.useEffect)(()=>{N>=_.length&&S(0)},[_.length,N]),(0,s.useEffect)(()=>{C>=F.length&&w(0)},[F.length,C]),console.log("\n\ud83d\udcfa UI Data Sources (ImageSlider.js):"),console.log("   Regular schools data (data1):",e),console.log("   Filtered schools data (filteredData):",t),console.log("   Display schools data (displaySchools with loading state):",E),console.log("   \ud83d\udca1 Using filteredData in JSX (could use displaySchools for instant loading feedback)!\n"),(0,c.jsxs)("div",{className:"container-fluid",style:{borderRadius:"22px"},children:[(0,c.jsx)("div",{id:"schoolCarousel",className:"carousel slide","data-bs-ride":"carousel","data-bs-interval":"10000",ref:A,children:(0,c.jsxs)("div",{className:"carousel-inner",children:[(0,c.jsx)("div",{className:"py-2",children:(0,c.jsx)("h1",{className:"text-center",style:{backgroundColor:"#EFA325",color:"#1a1a1a",padding:"10px",borderRadius:"22px",fontWeight:"600"},children:"\u0a86\u0aaa\u0aa3\u0ac0 \u0ab8\u0a82\u0ab8\u0acd\u0aa5\u0abe"})}),(0,c.jsx)("div",{className:"d-none d-md-block",children:_.length>0?_.map((e,o)=>(0,c.jsxs)("div",{className:"content-box2 bG_School carousel-item ".concat(o===N?"active":""),children:[(0,c.jsx)("div",{className:"col-md-12 d-flex justify-content-center align-items-center mb-3 flex-wrap gap-2",children:f.length>0?f.map((e,o)=>(0,c.jsx)("div",{className:"col-md-2",children:(0,c.jsx)("button",{onClick:()=>p(e),className:"btn text-white w-100 d-flex justify-content-center align-items-center text-center",style:{backgroundColor:m===e?"#EFA325":"#038176",border:"2px solid ".concat(m===e?"#EFA325":"#ffffff"),borderRadius:"22px",height:"60px",whiteSpace:"normal",fontSize:"14px",gap:"15px",transition:"all 0.3s ease",fontWeight:m===e?"bold":"normal"},children:R[e]||e})},o)):null}),(0,c.jsx)("div",{className:"row justify-content-center",children:e.map(e=>(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{className:"col-md-3 col-lg-3 mb-3",children:(0,c.jsx)(i.N_,{to:"/school/".concat(e.id),className:"text-decoration-none text-dark",children:(0,c.jsxs)("div",{className:"h-100 School_Card d-flex flex-column justify-content-center align-items-center text-center",style:{borderRadius:"15px",padding:"20px",backgroundColor:"#fff",minHeight:"auto",cursor:"pointer"},children:[e.logo?(0,c.jsx)("img",{src:L(e.logo),alt:"logo School",className:"rounded-1 mb-3",style:{height:"150px",objectFit:"contain"},loading:"lazy"}):(0,c.jsx)("div",{className:"rounded-1 d-flex align-items-center justify-content-center",style:{width:"auto",height:"150px",background:"#ffffff",color:"#067C71",fontWeight:700,fontSize:"30px",borderRadius:"22px"},children:"Ahir Samaj"}),(0,c.jsx)("span",{className:"fw-bold text-dark",children:e.name})]})})},e.id)}))}),(0,c.jsx)("div",{className:"row",children:(0,c.jsx)("div",{className:"col-12 d-flex justify-content-center",children:(0,c.jsxs)("div",{className:"d-flex justify-content-center align-items-center gap-2 my-2",children:[(0,c.jsx)("button",{className:"btn btn-light rounded shadow",type:"button",onClick:z,"aria-label":"Previous slide",children:(0,c.jsx)(a.xrT,{"aria-hidden":"true"})}),(0,c.jsx)("button",{className:"btn btn-light rounded shadow",type:"button",onClick:T,"aria-label":"Next slide",children:(0,c.jsx)(n.oLC,{"aria-hidden":"true"})})]})})})]},o)):(0,c.jsx)("div",{className:"carousel-item active text-center py-5",children:(0,c.jsx)("p",{children:"No results found."})})}),(0,c.jsx)("div",{className:"d-block d-md-none",children:(0,c.jsxs)("div",{id:"mobileSchoolCarousel",className:"carousel content-box1 slide","data-bs-interval":"4000",children:[(0,c.jsx)("div",{className:"carousel-inner",children:F.map((e,o)=>(0,c.jsxs)("div",{className:"carousel-item ".concat(o===C?"active":""),children:[(0,c.jsx)("div",{className:"d-flex d-md-none py-3 overflow-auto gap-2 px-1",style:{scrollbarWidth:"none"},children:f.map((e,o)=>(0,c.jsx)("button",{onClick:()=>p(e),className:"btn text-white flex-shrink-0",style:{minWidth:"140px",height:"50px",backgroundColor:m===e?"#EFA325":"#038176",border:"2px solid ".concat(m===e?"#EFA325":"#ffffff"),borderRadius:"22px",fontSize:"14px",fontWeight:m===e?"bold":"normal"},children:R[e]||e},o))}),(0,c.jsxs)("div",{className:"row gx-3 gy-2 p-2",children:[e.map(e=>(0,c.jsx)("div",{className:"col-6 p-2",children:(0,c.jsx)(i.N_,{to:"/school/".concat(e.id),className:"text-decoration-none text-dark",children:(0,c.jsxs)("div",{className:"shadow-sm d-flex flex-column align-items-center text-center",style:{borderRadius:"12px",padding:"10px",backgroundColor:"#fff",height:"180px",justifyContent:"space-between"},children:[(0,c.jsx)("div",{style:{width:"100%",height:"auto",display:"flex",alignItems:"center",justifyContent:"center"},children:e.logo?(0,c.jsx)("img",{src:L(e.logo),alt:"".concat(e.name," logo"),width:"120",height:"120",loading:"lazy",style:{objectFit:"contain",display:"block"}}):(0,c.jsx)("div",{style:{width:"100%",height:"120px",background:"#ffffff",color:"#067C71",fontWeight:700,fontSize:"18px",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:"Ahir Samaj"})}),(0,c.jsx)("span",{className:"fw-bold text-dark small",style:{fontSize:"10px",minHeight:"32px",display:"flex",alignItems:"center"},children:e.name})]})})},e.id)),1===e.length&&(0,c.jsx)("div",{className:"col-6"})]})]},o))}),(0,c.jsxs)("div",{className:"d-flex justify-content-center align-items-center gap-3 mb-3",children:[(0,c.jsx)("button",{className:"btn btn-light rounded shadow",type:"button",onClick:()=>{F.length&&w(e=>(e-1+F.length)%F.length)},"aria-label":"Previous slide",children:(0,c.jsx)(a.xrT,{"aria-hidden":"true"})}),(0,c.jsx)("button",{className:"btn btn-light rounded shadow",type:"button",onClick:()=>{F.length&&w(e=>(e+1)%F.length)},"aria-label":"Next slide",children:(0,c.jsx)(n.oLC,{"aria-hidden":"true"})})]})]})})]})}),(0,c.jsx)("hr",{className:"border-light"})]})}}}]);
//# sourceMappingURL=493.f1ec85ee.chunk.js.map